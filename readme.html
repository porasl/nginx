<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px Arial; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px Arial; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.7px Arial; -webkit-text-stroke: #000000}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.3px Arial; -webkit-text-stroke: #000000}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Arial; -webkit-text-stroke: #000000}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #000000}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px 'Helvetica Neue'; -webkit-text-stroke: #000000}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px Arial; color: #2e56db; -webkit-text-stroke: #2e56db}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px Arial; color: #4a72e0; -webkit-text-stroke: #4a72e0}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px Arial; color: #4a72e0; -webkit-text-stroke: #4a72e0; min-height: 16.0px}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.3px 'Helvetica Neue'; -webkit-text-stroke: #000000}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px 'Helvetica Neue'; -webkit-text-stroke: #000000; min-height: 17.0px}
    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px 'Helvetica Neue'; -webkit-text-stroke: #000000}
    p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Helvetica Neue'; -webkit-text-stroke: #000000}
    li.li10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.7px 'Helvetica Neue'; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {font: 14.7px 'Helvetica Neue'; font-kerning: none; color: #175f20; -webkit-text-stroke: 0px #175f20}
    span.s3 {font: 30.7px 'Apple Color Emoji'; font-kerning: none}
    span.s4 {font: 30.7px Arial; font-kerning: none}
    span.s5 {font: 11.0px Arial; font-kerning: none}
    span.s6 {font-kerning: none; font-variant-ligatures: common-ligatures}
    span.s7 {font-variant-ligatures: no-common-ligatures}
    span.s8 {font: 14.7px Arial; font-kerning: none}
    span.s9 {font-kerning: none; color: #175f20; -webkit-text-stroke: 0px #175f20}
    span.s10 {-webkit-text-stroke: 0px #000000}
    span.s11 {font: 14.7px 'Helvetica Neue'; font-kerning: none}
    table.t1 {margin: 0.0px 39.3px 0.0px 0.0px; border-collapse: collapse}
    td.td1 {width: 214.0px; padding: 6.7px 6.7px 6.7px 6.7px}
    td.td2 {width: 297.1px; padding: 6.7px 6.7px 6.7px 6.7px}
    ul.ul1 {list-style-type: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">Compiling NGINX with RTMP manually</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s1"><b>Install dependencies</b></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">sudo apt update</span></p>
<p class="p1"><span class="s1">sudo apt install -y build-essential libpcre3 libpcre3-dev libssl-dev zlib1g-dev</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p4"><span class="s1"><b>Download NGINX source code</b></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">cd /usr/local/src</span></p>
<p class="p1"><span class="s1">sudo wget http://nginx.org/download/nginx-1.24.0.tar.gz</span></p>
<p class="p1"><span class="s1">sudo tar -zxvf nginx-1.24.0.tar.gz</span></p>
<p class="p1"><span class="s1">cd nginx-1.24.0</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p4"><span class="s1"><b>Clone the RTMP module</b></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">sudo git clone https://github.com/arut/nginx-rtmp-module.git</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p5"><span class="s1"><b>Configure NGINX build with RTMP</b></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">sudo ./configure --with-http_ssl_module --add-module=../nginx-rtmp-module</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p4"><span class="s1"><b>Â Build and install</b></span></p>
<p class="p1"><span class="s1">sudo make</span></p>
<p class="p1"><span class="s1">sudo make install</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">This installs nginx to </span><span class="s2">/usr/local/nginx/</span><span class="s1">Â by default.</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p4"><span class="s1"><b>Now Configure NGINX to enable RTMP</b></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">sudo nano /etc/nginx/nginx.conf</span></p>
<p class="p1"><span class="s1">Or</span></p>
<p class="p1"><span class="s1">sudo nano /usr/local/nginx/conf/nginx.conf</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">(depending on how you installed)</span></p>
<p class="p1"><span class="s1">Add this <b>inside</b>Â </span><span class="s2">http {}</span><span class="s1">Â OR separately after </span><span class="s2">events {}</span><span class="s1">:</span></p>
<p class="p1"><span class="s1">rtmp {</span></p>
<p class="p1"><span class="s1">Â  Â  server {</span></p>
<p class="p1"><span class="s1">Â  Â  Â  Â  listen 1935; Â # RTMP default port</span></p>
<p class="p1"><span class="s1">Â  Â  Â  Â  chunk_size 4096;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">Â  Â  Â  Â  application live {</span></p>
<p class="p1"><span class="s1">Â  Â  Â  Â  Â  Â  live on;</span></p>
<p class="p1"><span class="s1">Â  Â  Â  Â  Â  Â  record off;</span></p>
<p class="p1"><span class="s1">Â  Â  Â  Â  }</span></p>
<p class="p1"><span class="s1">Â  Â  }</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">This enables an RTMP <b>live streaming server</b>Â on port <b>1935</b>.</span></p>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px Arial; -webkit-text-stroke: #000000"><span class="s3">ðŸš€</span><span class="s4"><b> </b></span><span class="s1"><b>Start / Restart NGINX</b></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; -webkit-text-stroke: #000000"><span class="s5">Update config file for example in MAC see </span><span class="s6">/opt/homebrew/etc/nginx. otherwise /usr/local/etc/nginx</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 26.7px Arial; -webkit-text-stroke: #000000; min-height: 31.0px"><span class="s1"></span><br></h1>
<p class="p1"><span class="s1">sudo systemctl restart nginx</span></p>
<p class="p1"><span class="s1">sudo /usr/local/nginx/sbin/nginx</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">For MAC</span></p>
<p class="p9"><span class="s7">brew services restart nginx<span class="Apple-converted-space">Â </span></span></p>
<p class="p2"><span class="s1"></span><br></p>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 18.7px Arial; -webkit-text-stroke: #000000"><span class="s1"><b>To stream to your NGINX server:</b></span></h1>
<p class="p1"><span class="s1">Use OBS, or any RTMP-compatible encoder.</span></p>
<p class="p1"><span class="s1">In OBS (or ffmpeg):</span></p>
<p class="p10"><span class="s8"><b>Server</b>: </span><span class="s9">rtmp://your-server-ip/live<br>
</span><span class="s8"><b>Stream Key</b>: whatever you want</span></p>
<p class="p1"><span class="s1">Stream to:</span></p>
<p class="p11"><span class="s1"><i>rtmp://your-server-ip/live/mystream</i></span></p>
<p class="p1"><span class="s1">then your stream will be available at:</span></p>
<p class="p12"><span class="s1">rtmp://your-server-ip/live/mystream</span></p>
<p class="p13"><span class="s1"></span><br></p>
<p class="p4"><span class="s1"><b>Quick Troubleshooting</b></span></p>
<p class="p1"><span class="s1">If NGINX fails to start: check syntax with </span><span class="s2">nginx -t<br>
</span><span class="s1">Make sure port 1935 is open in your firewall (or cloud security group).<br>
Use OBS to push stream â†’ check logs at </span><span class="s2">/var/log/nginx/error.log</span></p>
<p class="p14"><span class="s1">Quick Commands Summary</span></p>
<p class="p10"><span class="s1">sudo apt install nginx libnginx-mod-rtmp Â  # easiest</span></p>
<p class="p10"><span class="s1">sudo systemctl restart nginx Â  Â  Â  Â  Â  Â  Â  # restart after config</span></p>
<p class="p10"><span class="s1">sudo ufw allow 1935/tcp Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # allow RTMP port</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p16"><span class="s1">Streams</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p10"><span class="s1">Live stream using OBS</span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p10"><span class="s1">Set RTMP server and key</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p10"><span class="s1">Serve live RTMP</span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p10"><span class="s1">rtmp://your-ip/live/stream-key</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p10"><span class="s1">(Optional) Serve HLS playlists</span></p>
      </td>
      <td valign="top" class="td2">
        <p class="p10"><span class="s1">Additional config needed</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p14"><span class="s1">Ideal setup for PUBLIC video streaming</span></p>
<ul class="ul1">
  <li class="li10"><span class="s10"></span><span class="s1">Store video files (or live streams) somewhere reachable (your server, S3, or similar)</span></li>
  <li class="li10"><span class="s10"></span><span class="s1">Use NGINX + RTMP + HLS to stream them publicly</span></li>
  <li class="li10"><span class="s10"></span><span class="s1">Optional: Use a CDN (Cloudflare, AWS CloudFront) for faster delivery worldwide</span></li>
  <li class="li10"><span class="s10"></span><span class="s1">Embed videos in your website with standard </span><span class="s9">&lt;video&gt;</span><span class="s1">Â tag pointing to HLS (</span><span class="s9">.m3u8</span><span class="s1">)</span></li>
</ul>
<p class="p14"><span class="s1">Summary</span><span class="s11">:</span></p>
<p class="p10"><span class="s1">sudo apt install nginx libnginx-mod-rtmp Â  # easiest</span></p>
<p class="p10"><span class="s1">sudo systemctl restart nginx Â  Â  Â  Â  Â  Â  Â  # restart after config</span></p>
<p class="p10"><span class="s1">sudo ufw allow 1935/tcp Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  # allow RTMP port</span></p>
<p class="p10"><span class="s1">rtmp://ip/live/stream-key</span></p>
<p class="p15"><span class="s1"></span><br></p>
<p class="p14"><span class="s1">how to set up NGINX RTMP to serve Public HLS streams</span></p>
<p class="p17"><span class="s1">rtmp {</span></p>
<p class="p17"><span class="s1">Â  Â  server {</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  listen 1935;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  chunk_size 4096;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  application live {</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  live on;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  record off;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  hls on;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  hls_path /tmp/hls;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  hls_fragment 6s;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  hls_playlist_length 30s;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  }</span></p>
<p class="p17"><span class="s1">Â  Â  }</span></p>
<p class="p17"><span class="s1">}</span></p>
<p class="p17"><span class="s1">http {</span></p>
<p class="p17"><span class="s1">Â  Â  server {</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  listen 8080;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  location /hls {</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  types {</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  Â  Â  application/vnd.apple.mpegurl m3u8;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  Â  Â  video/mp2t ts;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  }</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  root /tmp;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  add_header Cache-Control no-cache;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  Â  Â  add_header Access-Control-Allow-Origin *;</span></p>
<p class="p17"><span class="s1">Â  Â  Â  Â  }</span></p>
<p class="p17"><span class="s1">Â  Â  }</span></p>
<p class="p17"><span class="s1">}</span></p>
<p class="p10"><span class="s1">&lt;video controls width="640" height="360" autoplay&gt;</span></p>
<p class="p10"><span class="s1">Â  &lt;source src="http://your-server-ip:8080/hls/streamkey.m3u8" type="application/vnd.apple.mpegurl"&gt;</span></p>
<p class="p10"><span class="s1">Â  Your browser does not support HLS playback.</span></p>
<p class="p10"><span class="s1">&lt;/video&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
</body>
</html>
